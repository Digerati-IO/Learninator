<!DOCTYPE HTML>
<html>
<head>
    <title>Tilemap</title>
    <script>
        function start() {
            var tileMapOpts = {
                        tileMap: {
                            path: "images/tiles.json",
                            size: 16,
                            width: 64,
                            height: 50
                        },
                        render: {
                            width: 800,
                            height: 600
                        },
                        menu: {
                            width: 120
                        }
                    },
                    stage = new PIXI.Container(),
                    renderer = PIXI.autoDetectRenderer(tileMapOpts.render.width, tileMapOpts.render.height, tileMapOpts.render),
                    tileAtlas = [tileMapOpts.tileMap.path],
                    loader = PIXI.loader.add(tileMapOpts.tileMap.path).load(onLoaded);

            renderer.backgroundColor = 0xFFFFFF;
            document.body.appendChild(renderer.view);

            loader.load();

            // called when sprites are finished loading
            function onLoaded() {
                var tilemap = new TileMap(tileMapOpts);
                tilemap.position.x = tileMapOpts.menu.width;
                stage.addChild(tilemap);

                var menu = new Menu(tilemap, tileMapOpts);
                tilemap.menu = menu;
                stage.addChild(menu);

                // zoom in on the starting tile
                tilemap.selectTile(tilemap.startLocation.x, tilemap.startLocation.y);
                tilemap.zoomIn();

                // begin drawing
                requestAnimationFrame(animate);
            }

            function animate() {
                requestAnimationFrame(animate);
                renderer.render(stage);
            }

            $("#demo").append(renderer.view);
        }
    </script>
</head>
<body onload="start();">
<div id="main-layout" class="mdl-layout mdl-js-layout">
    <link rel="import" href="templates/mdl/topnav.html">

    <main class="mdl-layout__content">
        <div id="main-content" class="page-content">
            <div class="content-grid mdl-grid">
                <div class="mdl-cell mdl-cell--8-col mdl-cell--4-col-tablet mdl-shadow--16dp">
                    <div class="mdl-card__title">
                        <button id="menu-bottom-left"
                                class="mdl-button mdl-js-button mdl-button--icon mdl-button--colored">
                            <i class="material-icons">more_vert</i>
                        </button>
                        <div class="mdl-tooltip" data-mdl-for="menu-bottom-left">
                            Do <strong>things!</strong>
                        </div>
                        <ul class="mdl-menu mdl-menu--bottom-left mdl-js-menu mdl-js-ripple-effect"
                            data-mdl-for="menu-bottom-left">
                            <li class="mdl-menu__item">Some Action</li>
                            <li disabled class="mdl-menu__item">Disabled Action</li>
                            <li class="mdl-menu__item">Yet Another Action</li>
                        </ul>
                        <h2 class="mdl-card__title-text">TileMap</h2>
                    </div>
                    <div class="mdl-card__supporting-text">
                        <p id="demo"></p>
                    </div>
                </div>
            </div>
        </div>
    </main>
</div>

<script src="js/lib/external/rl.js"></script>

<script src="js/lib/Utility.js"></script>
<script src="js/lib/Vec.js"></script>

<script src="js/lib/ui/Dat.js"></script>

<script src="js/lib/CollisionDetector.js"></script>
<script src="js/lib/graphing/FlotGraph.js"></script>
<script src="js/lib/grid/Grid.js"></script>
<script src="js/lib/QuadTree.js"></script>

<script src="js/lib/game/Game.js"></script>
<script src="js/lib/game/GameObject.js"></script>

<script src="js/entities/Wall.js"></script>
<script src="js/entities/Entity.js"></script>
<script src="js/entities/Agent.js"></script>

<script src="js/lib/game/GameWorld.js"></script>

</body>
</html>
